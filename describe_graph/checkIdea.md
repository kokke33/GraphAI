# GraphAIを使用したインタラクティブ相談システム

このGraphAIの構成は、ユーザーとのインタラクティブな相談プロセスを実現するためのデータフローグラフを示しています。以下に、その主要な要素と動作を説明します。

## 主要コンポーネント

1. **ループ制御**:
   - `loop`セクションで、`:continue`条件に基づく繰り返し実行を指定
   - ユーザーが「bye」と入力するまでループが継続

2. **ユーザー入力処理**:
   - `userInput`ノード: `textInputAgent`を使用して相談内容を受付
   - `checkInput`ノード: 入力が「bye」でないことを確認

3. **会話の要約**:
   - `summary`ノード: 会話内容を蓄積する配列を管理
   - `reducer`ノード: 要約の更新を担当

4. **アイデア生成と評価**:
   - `suggestIdea`ノード: ユーザー入力と要約を基にアイデアを提案
   - `suggestIdea_LLM`ノード: OpenAIモデルでアイデアを生成
   - `evaluationIdeas`ノード: 提案されたアイデアを評価
   - `evaluationIdeas_LLM`ノード: 評価結果を生成

5. **トップアイデアの選定**:
   - `selectTop3`ノード: 最適なアイデア3つを選定し理由を説明
   - `selectTop3_LLM`ノード: 選定結果を生成

6. **出力処理**:
   - `output`ノード: アイデア、評価、要約、次の質問をフォーマット化して出力

7. **フォローアップ質問生成**:
   - `nextQA`ノード: 選定されたアイデアを基に次の質問を生成
   - `nextQA_LLM`ノード: 質問内容を生成

8. **会話のまとめ**:
   - `summaryChat`ノード: ユーザーの相談内容と選定アイデアを要約
   - `summaryChat_LLM`ノード: 要約内容を生成
   - `matome`ノード: 全体の会話の流れを表示

## システムの動作フロー

1. ユーザーから相談内容を受け付けます。
2. 入力内容をチェックし、「bye」でない場合はプロセスを継続します。
3. これまでの会話内容を要約します。
4. ユーザーの入力と要約を基にアイデアを生成します。
5. 生成されたアイデアを評価します。
6. 最適なアイデア3つを選定し、理由を説明します。
7. アイデア、評価、要約、次の質問をフォーマット化して出力します。
8. 選定されたアイデアを基に次の質問を生成します。
9. ユーザーの相談内容と選定されたアイデアを要約します。
10. 全体の会話の流れをまとめて表示します。

このGraphAIシステムにより、ユーザーとの対話を通じて情報を収集し、分析し、効果的な提案を生成するインタラクティブなアプリケーションを構築することができます。各ノードが特定の役割を果たし、全体として一貫した相談プロセスを実現しています。